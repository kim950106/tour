<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <!-- ëª¨ë°”ì¼ ìµœì í™” ë·°í¬íŠ¸ -->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>MBTI ê´€ê³„ë„ | LS TourPass</title>
  <style>
    :root{
      --brand-start:#5b7cfa; --brand-end:#7a53c8; --ink:#0f172a; --ink-2:#334155; --muted:#64748b;
      --bg:#ffffff; --panel:#f8fafc; --line:#e2e8f0; --ok:#10b981; --warn:#f59e0b; --bad:#ef4444; --chip:#eef2ff;
    }
    *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
    html,body{height:100%}

    /* âœ… ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ + ì„¸ì´í”„ ì—ì–´ë¦¬ì–´ ê³ ë ¤ */
    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
      background:linear-gradient(135deg,var(--brand-start),var(--brand-end));
      color:var(--ink);
      min-height:100vh;
      /* ê¸°ë³¸ íŒ¨ë”© + ì•„ì´í°/ê°¤ëŸ­ì‹œ ë…¸ì¹˜ & í™ˆë°” ì˜ì—­ */
      padding:8px;
      padding-top:calc(8px + env(safe-area-inset-top, 0px));
      padding-right:calc(8px + env(safe-area-inset-right, 0px));
      padding-bottom:calc(8px + env(safe-area-inset-bottom, 0px));
      padding-left:calc(8px + env(safe-area-inset-left, 0px));
      overflow:auto;
    }

    /* âœ… ê³ ì • height ëŒ€ì‹  min-height + ì „ì²´í­ ì‚¬ìš© */
    .app{
      display:flex;
      flex-direction:column;
      min-height:calc(100vh - 16px);
      width:100%;
      max-width:820px;
      margin:0 auto;
      background:var(--bg);
      border-radius:18px;
      box-shadow:0 14px 36px rgba(0,0,0,.16);
      overflow:hidden;
    }

    .header{
      background:linear-gradient(135deg,var(--brand-start),var(--brand-end));
      color:#fff;
      padding:16px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    .title{
      font-weight:800;
      font-size:18px;
      letter-spacing:.2px;
      display:flex;
      gap:8px;
      align-items:center;
    }

    .controls{
      background:var(--panel);
      border-bottom:1px solid var(--line);
      padding:12px;
    }
    .row{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .row+.row{margin-top:8px}
    .btn{
      appearance:none;
      border:0;
      border-radius:12px;
      padding:10px 12px;
      font-weight:800;
      cursor:pointer;
      font-size:14px;
    }

    /* âœ… ëª¨ë°”ì¼ì—ì„œ min-width ì œê±° (ì¤„ ë°”ê¿ˆ ìì—°ìŠ¤ëŸ½ê²Œ) */
    .btn-primary{
      background:linear-gradient(135deg,#6366f1,#4f46e5);
      color:#fff;
      flex:1;
      min-width:0;
    }
    .btn-outline{
      background:#fff;
      border:2px solid var(--brand-start);
      color:var(--brand-start);
      font-weight:800;
    }

    .input,select{
      flex:1;
      min-width:0;
      background:#fff;
      border:2px solid var(--line);
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
    }
    .chip{
      background:var(--chip);
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      color:#3730a3;
      font-weight:800;
    }

    /* âœ… ì‘ì€ í™”ë©´ì—ì„œë„ ê³¼í•˜ê²Œ ê¸¸ì§€ ì•Šê²Œ clamp */
    .viz-wrap{
      position:relative;
      flex:1;
      min-height:clamp(260px, 55vh, 480px);
      overflow:hidden;
      background:linear-gradient(135deg,#fff6fb,#eef7ff);
    }
    #stage{position:absolute;inset:0}

    .legend{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      padding:8px 12px;
      border-top:1px solid var(--line);
      background:#fff;
    }
    .legend-item{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      color:var(--ink-2);
    }
    .legend-dot{
      width:18px;height:4px;border-radius:4px;display:inline-block;
    }

    .stats{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:8px;
      padding:10px 12px;
      background:#fff;
      border-top:1px solid var(--line);
    }
    .stat{
      background:linear-gradient(180deg,#f6f7fb,#eaeef7);
      border-radius:12px;
      padding:10px;
      text-align:center;
    }
    .stat .v{font-weight:900}
    .stat .k{font-size:11px;color:var(--muted)}

    .sheetbox{
      display:grid;
      grid-template-columns:1.2fr 1fr;
      gap:8px;
    }
    .mebox{
      background:#eef6ff;
      border:1px solid #c7dbff;
      border-radius:12px;
      padding:8px;
    }
    .gridbox{
      background:#f0fff7;
      border:1px solid #c8f3dd;
      border-radius:12px;
      padding:8px;
    }
    .label{
      font-size:12px;
      color:#1e40af;
      font-weight:900;
      margin-bottom:6px;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .helper{
      font-size:12px;
      color:var(--muted);
    }

    /* âœ… ë°”í…€ì‹œíŠ¸: í™ˆë°” ì˜ì—­ í™•ë³´ */
    .bottomsheet{
      position:fixed;
      left:0;
      right:0;
      bottom:calc(-100% - env(safe-area-inset-bottom, 0px));
      background:#fff;
      border-top-left-radius:16px;
      border-top-right-radius:16px;
      box-shadow:0 -10px 30px rgba(0,0,0,.18);
      padding:16px;
      padding-bottom:calc(16px + env(safe-area-inset-bottom, 0px));
      transition:bottom .25s ease;
      z-index:50;
      max-width:820px;
      margin:0 auto;
    }
    .bottomsheet.show{bottom:0}
    .sheet-head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    .sheet-title{font-weight:900}
    .x{
      width:34px;
      height:34px;
      display:grid;
      place-items:center;
      border-radius:50%;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
    }
    .searchrow{
      display:flex;
      gap:8px;
      margin-top:8px;
      flex-wrap:wrap;
    }

    @media (max-width:480px){
      .sheetbox{grid-template-columns:1fr}
    }

    /* í‘œ ë·° ìŠ¤íƒ€ì¼ */
    .table-view{
      position:absolute;
      inset:0;
      overflow:auto;
      padding:16px;
      display:none;
    }
    .table-card{
      background:#fff;
      border:1px solid var(--line);
      border-radius:14px;
      box-shadow:0 8px 18px rgba(0,0,0,.07);
    }
    .table-title{
      padding:12px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .table-grid{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:0;
      border-top:1px solid var(--line);
    }
    .table-col{border-right:1px solid var(--line)}
    .table-col:last-child{border-right:0}
    .col-head{
      background:#f8fafc;
      padding:10px 12px;
      font-weight:900;
      font-size:13px;
      position:sticky;
      top:0;
      z-index:1;
    }
    .col-body{
      padding:8px 12px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .pill{
      display:flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#fff;
    }
    .pill .mbti{font-weight:900}
    .muted{
      color:#94a3b8;
      font-size:13px;
      padding:16px;
      text-align:center;
    }
    @media (max-width:700px){
      .table-grid{grid-template-columns:1fr}
      .col-head{position:relative}
    }

    /* âœ… ì¶”ê°€ ëª¨ë°”ì¼ íŠœë‹ */
    @media (max-width:600px){
      .app{
        border-radius:14px;
        box-shadow:0 10px 24px rgba(0,0,0,.16);
      }
      .header{padding:12px 10px;}
      .title{font-size:16px;}
      .controls{padding:10px;}
      .row{gap:6px;}
      .btn{
        padding:9px 10px;
        font-size:13px;
      }
      .input,select{
        padding:9px 10px;
        font-size:13px;
      }
      .legend{padding:6px 10px;}
      .stats{
        padding:8px 10px;
        gap:6px;
      }
      .viz-wrap{
        min-height:clamp(240px, 50vh, 420px);
      }
      .table-view{padding:12px;}
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="title">ğŸŒŸ MBTI ê´€ê³„ë„</div>
    </div>

    <div class="controls">
      <div class="row">
        <button id="btn-load" class="btn btn-primary">ğŸ‘¥ ê´€ê³„ë„ ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <button id="btn-reset" class="btn btn-outline">ì´ˆê¸°í™”</button>
      </div>

      <div class="searchrow">
        <input id="q" class="input" placeholder="ğŸ” ì´ë¦„ ë˜ëŠ” MBTI(ì˜ˆ: ENFP) ê²€ìƒ‰" />
        <select id="filterMbti">
          <option value="">MBTI í•„í„°</option>
          <option>INTJ</option><option>INTP</option><option>ENTJ</option><option>ENTP</option>
          <option>INFJ</option><option>INFP</option><option>ENFJ</option><option>ENFP</option>
          <option>ISTJ</option><option>ISFJ</option><option>ESTJ</option><option>ESFJ</option>
          <option>ISTP</option><option>ISFP</option><op
